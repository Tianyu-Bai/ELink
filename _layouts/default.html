<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
 
<title>{{ page.title }}</title>
<link rel="shortcut icon" type="image/x-icon" href="{{ '/Images/icon/favicon.ico' | relative_url }}">
<link rel="icon" type="image/png" sizes="32x32" href="{{ '/Images/icon/favicon-32x32.png' | relative_url }}">
<link rel="icon" type="image/png" sizes="16x16" href="{{ '/Images/icon/favicon-16x16.png' | relative_url }}">
<link rel="apple-touch-icon" sizes="180x180" href="{{ '/Images/icon/apple-touch-icon.png' | relative_url }}">
<link rel="manifest" href="{{ '/Images/icon/site.webmanifest' | relative_url }}">
 
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=JetBrains+Mono&display=swap" rel="stylesheet">
<link rel="preload" href="{{ '/Videos/On skull_3.16MB.glb' | relative_url }}" as="fetch" type="model/gltf-binary" crossorigin>
<script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>
<link rel="canonical" href="https://e-link.pages.dev/" />
 
<style>
 
 /* å½“è§†é¢‘å¼¹çª—æ˜¾ç¤ºæ—¶ï¼Œæ¢å¤é»˜è®¤é¼ æ ‡æŒ‡é’ˆå¹¶éšè—è‡ªå®šä¹‰å…‰æ ‡ */
body.video-active {
    cursor: auto !important;
}
body.video-active .cursor-dot,
body.video-active .cursor-outline {
    display: none !important;
}

  /* --- 0. å…¨å±€è®¾ç½® --- */
  * { box-sizing: border-box; } /* é˜²æ­¢å†…è¾¹è·æ’‘ç ´å¤–æ¡† */
 html, body { width: 100%; max-width: 100vw; overflow-x: hidden; } /* å¼ºåˆ¶é”æ­»æ¨ªå‘æ»šåŠ¨ */
 
 .github-only { display: none !important; }
  .lang-zh { display: none; animation: fadeIn 0.5s ease; }
  .lang-en { display: block; animation: fadeIn 0.5s ease; }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  
  /* ğŸ”¥ Lenis å¹³æ»‘æ»šåŠ¨æ¨èæ ·å¼ (ä¸å½±å“åŸæœ‰è®¾è®¡) */
  html.lenis, html.lenis body { height: auto; }
  .lenis.lenis-smooth { scroll-behavior: auto !important; }
  .lenis.lenis-smooth [data-lenis-prevent] { overscroll-behavior: contain; }
  .lenis.lenis-stopped { overflow: hidden; }
  .lenis.lenis-scrolling iframe { pointer-events: none; }

  body { 
    margin: 0; padding: 0; color: #e0e7ff; 
    font-family: 'Inter', -apple-system, sans-serif; 
    line-height: 1.6; overflow-x: hidden; 
    cursor: none; 
    scrollbar-width: thin; scrollbar-color: #3b82f6 transparent;
    transition: color 0.5s ease;
    background-color: #0a0a0f; 
  }
  @media (pointer: coarse) { body { cursor: auto; } }
 
  /* âš¡ï¸ CSS æ€§èƒ½ä¼˜åŒ–ï¼šé˜²æ­¢å›¾ç‰‡åŠ è½½æ—¶å¸ƒå±€æŠ–åŠ¨ */
  img, video, iframe { 
      max-width: 100% !important; 
      height: auto !important; 
      box-sizing: border-box; 
      content-visibility: auto; /* æµè§ˆå™¨æ¸²æŸ“ä¼˜åŒ– */
      /* é»˜è®¤è®©å›¾ç‰‡å…ˆç¨å¾®é€æ˜ï¼ŒåŠ è½½å¥½å JS æ§åˆ¶æ˜¾ç¤ºï¼Œä½“éªŒæ›´ä¸æ»‘ */
      transition: opacity 0.5s ease;
  }
 
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: rgba(59, 130, 246, 0.5); border-radius: 10px; }
  ::-webkit-scrollbar-thumb:hover { background: rgba(59, 130, 246, 0.8); }
  ::selection { background: #3b82f6; color: #ffffff; text-shadow: 0 0 8px rgba(255, 255, 255, 0.8); }

/* --- 3D çª—å£å¢å¼ºï¼šåŠ è½½å™¨ä¸æ°´å° --- */
.model-loader {
  width: 40px;
  height: 40px;
  border: 3px solid rgba(59, 130, 246, 0.1);
  border-radius: 50%;
  border-top-color: #3b82f6;
  animation: spin 1s linear infinite;
}

.model-watermark-text {
  position: absolute;
  bottom: 15px;
  right: 15px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 10px;
  color: rgba(255, 255, 255, 0.3);
  pointer-events: none; /* é˜²æ­¢é®æŒ¡ 3D æ—‹è½¬æ“ä½œ */
  letter-spacing: 1px;
  z-index: 20;
}
@keyframes spin { to { transform: rotate(360deg); } }
 
 /* --- ğŸš€ å‡çº§ï¼šç£æ€§å‘å…‰å…‰æ ‡ --- */
 .cursor-dot, .cursor-outline, .bot-head, .bot-eye {
    will-change: transform; /* å‘Šè¯‰æµè§ˆå™¨æå‰åˆ†é… GPU èµ„æº */
    backface-visibility: hidden; /* é˜²æ­¢é—ªçƒ */
    transform-style: preserve-3d;
}
 
 .cursor-dot, .cursor-outline {
   position: fixed; top: 0; left: 0; border-radius: 50%; 
   z-index: 99999; pointer-events: none;
   transform: translate(-50%, -50%); /* ç¡®ä¿ä¸­å¿ƒå¯¹é½ */
 }
 .cursor-dot { 
   width: 8px; height: 8px; background-color: #60a5fa; 
   box-shadow: 0 0 8px #60a5fa; 
   transition: opacity 0.2s ease;
 }
 .cursor-outline {
  transition: transform 0.1s ease-out, width 0.2s, height 0.2s, background-color 0.2s, border-color 0.2s;
   will-change: transform;
}
 /* æ‚¬åœæ—¶çš„èšå…‰ç¯æ•ˆæœ */
 body.hovering .cursor-dot { opacity: 0; } /* éšè—ä¸­å¿ƒå°ç‚¹ */
 body.hovering .cursor-outline { 
   width: 60px; height: 60px; 
   background-color: rgba(96, 165, 250, 0.15); 
   border-color: rgba(96, 165, 250, 0.8); 
   box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
   backdrop-filter: blur(2px); /* è®©æŒ‰é’®åº•éƒ¨æœ‰ä¸€ç‚¹æ¯›ç»ç’ƒæ•ˆæœ */
 }
 
/* --- ğŸš€ å‡çº§ï¼šé«˜èƒ½æ¿€å…‰è¿›åº¦æ¡ --- */
 #progress-bar { 
   position: fixed; top: 0; left: 0; height: 3px; 
   /* ä¸»ä½“å˜æˆæŸ”å’Œçš„æ·±è“è‰² */
   background: #3b82f6; 
   box-shadow: 0 0 10px #3b82f6, 0 0 20px #1d4ed8; 
   width: 0%; z-index: 99999; 
   transition: width 0.15s cubic-bezier(0.4, 0, 0.2, 1); 
 }
 /* å¤´éƒ¨çš„ç‚¹æ”¹æˆåŒè‰²ç³»çš„éœ“è™¹è“ï¼Œå»æ‰åˆºçœ¼çš„çº¯ç™½ */
 #progress-bar::after {
   content: ''; position: absolute; top: -1px; right: 0; width: 8px; height: 5px;
   background: #60a5fa; border-radius: 50%; box-shadow: 0 0 10px 2px #3b82f6;
 }
 
  /* --- 2. èƒŒæ™¯ --- */
  #vanta-bg { position: fixed; z-index: -5; top: 0; left: 0; width: 100%; height: 100%; background: #0a0a0f; }
  #vanta-bg::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at center, transparent 0%, rgba(10, 10, 15, 0.4) 100%); pointer-events: none; transition: background 0.5s ease; }
  
  #meteor-canvas {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      z-index: -4; pointer-events: none; 
  }
    
  /* --- 3. å¸ƒå±€ --- */
  .layout-wrapper { position: relative; max-width: 860px; margin: 100px auto 60px; z-index: 10; perspective: 1000px; }
 
  /* --- 4. æœºå™¨äººæ ¸å¿ƒ --- */
  #bot-container { 
    position: absolute; top: 70px; left: 50%; 
    transform: translateX(-50%); width: 120px; height: 70px; 
    z-index: 9999; cursor: pointer; 
    opacity: 1; 
    transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); 
  }
  #bot-container.fixed-mode { position: fixed !important; top: auto !important; left: auto !important; bottom: 30px !important; right: 30px !important; transform: scale(0.9) !important; opacity: 1 !important; }
   
  /* --- ğŸ”¥ æœºå™¨äººå¼•å¯¼æ¨¡å¼ (æŒ‡å¼•æ’­æ”¾) --- */
  /* 1. ç®­å¤´æ ·å¼ï¼šé»˜è®¤éšè— */
  .guide-arrow {
    position: absolute;
    left: -50px; /* åœ¨æœºå™¨äººå·¦è¾¹ */
    top: 50%;
    transform: translateY(-50%);
    font-size: 40px;
    color: #ef4444; /* é†’ç›®çš„çº¢è‰² */
    opacity: 0;
    pointer-events: none;
    text-shadow: 0 0 10px rgba(239, 68, 68, 0.8);
    transition: opacity 0.3s;
    z-index: 100;
    font-weight: bold;
  }

  /* 2. å½“æœºå™¨äººè¿›å…¥ guide-mode æ—¶ï¼Œç§»åŠ¨å®ƒçš„ä½ç½®åˆ°è§†é¢‘æ—è¾¹ */
  #bot-container.guide-mode {
    position: fixed !important;
    top: 50% !important;
    right: 15% !important; /* åœåœ¨å±å¹•å³ä¾§ */
    left: auto !important;
    bottom: auto !important;
    transform: translate(0, -50%) scale(1.2) !important;
    z-index: 100006 !important; /* æ¯”è§†é¢‘å¼¹çª—è¿˜è¦é«˜ */
  }

  /* 3. å¼•å¯¼æ¨¡å¼ä¸‹æ˜¾ç¤ºç®­å¤´ï¼Œå¹¶è®©ç®­å¤´è·³åŠ¨ */
  #bot-container.guide-mode .guide-arrow {
    opacity: 1;
    animation: point-left 0.8s ease-in-out infinite alternate;
  }

  /* 4. ç®­å¤´åŠ¨ç”»ï¼šå‘å·¦æŒ‡ */
  @keyframes point-left {
    from { transform: translateY(-50%) translateX(0); }
    to { transform: translateY(-50%) translateX(-15px); }
  }

  /* è·³åŠ¨åŠ¨ç”» */
  #bot-container.attention-jump { animation: attention-bounce 0.6s ease infinite alternate; }
  @keyframes attention-bounce { 0% { transform: translateX(-50%) translateY(0) scale(1); } 100% { transform: translateX(-50%) translateY(-15px) scale(1.1); } }
  #bot-container.fixed-mode.attention-jump { animation: attention-bounce-fixed 0.6s ease infinite alternate; }
  @keyframes attention-bounce-fixed { 0% { transform: scale(0.9) translateY(0); } 100% { transform: scale(0.9) translateY(-15px); } }
 
  /* --- æ¶Ÿæ¼ªå…‰åœˆ (çº¯è“ç§‘æŠ€ç‰ˆ) --- */
 .pulse-ring { 
   position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
   width: 100px; height: 100px; border-radius: 50%; 
   /* ğŸ‘‡ è¿™é‡ŒæŠŠåŸæ¥çš„ç´«è‰²æ›¿æ¢æˆäº†ä½ çš„ä¸»é¢˜åŸºç¡€è“ */
   border: 2px solid rgba(59, 130, 246, 0.5); 
   opacity: 0; z-index: -1; pointer-events: none; 
   animation: pulse-ring-anim 6s infinite cubic-bezier(0.4, 0, 0.6, 1); 
   transition: opacity 0.5s; 
 }
 /* è¯´è¯æ—¶ï¼Œè®©å…‰åœˆé—ªçƒå¾—æ›´å¿«ï¼Œä¸”å˜æˆæ›´äº®çš„æµ…è“è‰² */
 #bot-container.speaking .pulse-ring { 
   animation-duration: 1.5s; 
   border-color: rgba(96, 165, 250, 0.9); 
 }
 #bot-container.interaction-done .pulse-ring { opacity: 0 !important; animation: none !important; }
 @keyframes pulse-ring-anim { 0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; } 30% { opacity: 0.6; } 100% { transform: translate(-50%, -50%) scale(2.5); opacity: 0; } }
 /* ==============================================================
     ğŸ”¥ å…¨æ–°é«˜ç§‘æŠ€ AI æ— äººæœºé£æ ¼ 
     ============================================================== */
  
  /* 1. æ— äººæœºèˆ±ä½“ï¼šæ·±ç°è“è‰²æ¸å˜åº•ï¼Œæ‚¬æµ®ç»ç’ƒè´¨æ„Ÿ */
  .bot-head { 
    width: 76px; height: 50px; 
    background: linear-gradient(145deg, #1e293b, #0f172a); 
    border: 2px solid rgba(59, 130, 246, 0.4); 
    border-radius: 38px; /* åœ†æ¶¦çš„èƒ¶å›Šå½¢ */
    margin: 0 auto; position: relative; 
    box-shadow: 0 10px 25px rgba(0,0,0,0.5), inset 0 2px 8px rgba(255,255,255,0.1), 0 0 15px rgba(59, 130, 246, 0.2); 
    display: flex; justify-content: center; align-items: center; gap: 14px; 
    animation: float-bot 3s ease-in-out infinite; 
    overflow: hidden; 
  }

  /* é¢ç½©å±å¹•ï¼šé»‘è‰²çš„ä¸€ä½“åŒ–æ˜¾ç¤ºå±åŒº */
  .bot-head::before {
    content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    width: 60px; height: 26px; background: #020617; border-radius: 13px; z-index: 0;
    box-shadow: inset 0 0 10px rgba(59, 130, 246, 0.2);
  }

  /* 2. å‘å…‰ LED çœ¼ç›ï¼šä¸¤æ¡äº®è“è‰²å…‰å¸¦ */
  .bot-eye { 
    width: 6px; height: 16px; background: #60a5fa; 
    border-radius: 6px; position: relative; z-index: 1; 
    box-shadow: 0 0 8px #60a5fa, 0 0 16px #3b82f6; 
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); 
    animation: led-blink 4s infinite; 
  }

  /* éšè—åŸæ¥çš„é»‘çœ¼ç ã€çœ¼çš®å’Œå˜´å·´ï¼Œä¸éœ€è¦æ”¹HTML */
  .bot-pupil, .bot-lid, .bot-mouth { display: none !important; }

  /* 3. è¯´è¯æ—¶çš„åŠ¨æ€è¡¨æƒ…ï¼šå¤–å£³è„‰å†²å‘å…‰ + çœ¼ç›å˜æˆå¼€å¿ƒçš„å¼¯å¼¯çœ¼ */
  #bot-container.speaking .bot-head { 
    box-shadow: 0 10px 25px rgba(0,0,0,0.5), 0 0 25px rgba(59, 130, 246, 0.6); 
    border-color: #60a5fa; 
  }
  #bot-container.speaking .bot-eye { 
    height: 6px; width: 12px; 
    border-radius: 12px 12px 0 0; /* å˜æˆ ^^ å½¢çŠ¶ */
    background: transparent; border-top: 3px solid #93c5fd; 
    box-shadow: 0 -5px 10px rgba(96, 165, 250, 0.8);
    margin-top: -6px; 
    animation: happy-bounce 0.4s infinite alternate; 
  }
  #bot-container.speaking .bot-eye:nth-child(2) { animation-delay: 0.1s; }

  /* 4. å…¨æ¯å¤©çº¿ï¼šå˜æˆä¸€ä¸ªå‘ä¸Šå‘å°„çš„å…‰é”¥ */
  .bot-antenna { 
    position: absolute; top: -14px; left: 50%; transform: translateX(-50%); 
    width: 0; height: 0; 
    border-left: 8px solid transparent; border-right: 8px solid transparent; 
    border-bottom: 18px solid rgba(59, 130, 246, 0.2); 
    filter: drop-shadow(0 -5px 5px rgba(59,130,246,0.6)); 
  }
  .bot-antenna::after { 
    content: ''; position: absolute; top: 4px; left: -2px; 
    width: 4px; height: 4px; background: #ffffff; border-radius: 50%; 
    box-shadow: 0 0 8px #fff, 0 0 15px #60a5fa; 
    animation: hologram-pulse 1.5s infinite alternate; 
  }

  /* --- è¡¥å……çš„å…³é”®å¸§åŠ¨ç”» --- */
  @keyframes led-blink { 
    0%, 48%, 52%, 100% { transform: scaleY(1); } 
    50% { transform: scaleY(0.1); } /* ç¬é—´å‹æ‰æ¨¡æ‹Ÿçœ¨çœ¼ */
  }
  @keyframes happy-bounce { 
    0% { transform: translateY(0); } 
    100% { transform: translateY(-3px) scaleX(1.1); } 
  }
  @keyframes hologram-pulse { 
    0% { opacity: 0.4; transform: scale(0.8); } 
    100% { opacity: 1; transform: scale(1.5); } 
  }
 
  #bot-speech { position: absolute; top: -45px; left: 50%; transform: translateX(-50%) scale(0); transform-origin: bottom center; background: rgba(30, 41, 59, 0.95); color: #fff; padding: 8px 16px; border-radius: 12px; font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; white-space: nowrap; pointer-events: none; border: 1px solid rgba(59, 130, 246, 0.4); box-shadow: 0 4px 15px rgba(0,0,0,0.3); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s; z-index: 10000; opacity: 0; }
  #bot-speech::after { content: ''; position: absolute; bottom: -5px; left: 50%; width: 8px; height: 8px; background: inherit; transform: translateX(-50%) rotate(45deg); border-right: 1px solid rgba(59, 130, 246, 0.4); border-bottom: 1px solid rgba(59, 130, 246, 0.4); }
  #bot-container.speaking #bot-speech { transform: translateX(-50%) scale(1); opacity: 1; }
 
  /* --- ğŸš€ å‡çº§ï¼šå…¨æ¯ HUD å¯¹è¯é¢æ¿ --- */
 #rpg-dialogue { 
   position: absolute; top: 65px; left: 50%; 
   transform: translateX(-50%) translateY(20px); 
   width: 600px; max-width: 90vw; 
   /* ç§‘æŠ€æ„Ÿç½‘æ ¼èƒŒæ™¯ */
   background-color: rgba(10, 15, 30, 0.95);
   background-image: 
     linear-gradient(rgba(59, 130, 246, 0.1) 1px, transparent 1px),
     linear-gradient(90deg, rgba(59, 130, 246, 0.1) 1px, transparent 1px);
   background-size: 20px 20px;
   /* éœ“è™¹å‘å…‰è¾¹æ¡† */
   border: 1px solid rgba(96, 165, 250, 0.5); 
   border-radius: 12px; padding: 15px; 
   box-shadow: 0 10px 40px rgba(0,0,0,0.8), 0 0 20px rgba(59, 130, 246, 0.3), inset 0 0 15px rgba(59, 130, 246, 0.2); 
   z-index: 20000; opacity: 0; pointer-events: none; 
   transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* æ›´æœ‰å¼¹æ€§çš„å¼¹å‡ºåŠ¨ç”» */
   display: flex; flex-direction: column; gap: 10px; 
   font-family: 'JetBrains Mono', monospace; 
   overflow: hidden; /* é˜²æ­¢æ‰«æçº¿æº¢å‡º */
 }
 /* å…¨æ¯æ‰«æçº¿åŠ¨ç”» */
 #rpg-dialogue::after {
   content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 10% !important;
   background: linear-gradient(to bottom, transparent, rgba(96, 165, 250, 0.4), transparent);
   box-shadow: 0 0 10px rgba(96, 165, 250, 0.5);
   opacity: 0.5; pointer-events: none; z-index: -1;
   animation: hud-scan 3s linear infinite;
 }
 @keyframes hud-scan {
   0% { transform: translateY(-100px); }
   100% { transform: translateY(300px); }
 }
 #rpg-dialogue.active { opacity: 1; transform: translateX(-50%) translateY(0); pointer-events: auto; }
 #bot-container.fixed-mode #rpg-dialogue { top: auto; bottom: 80px; left: auto; right: 0; transform: translateY(20px); }
 #bot-container.fixed-mode #rpg-dialogue.active { transform: translateY(0); }
 #rpg-text { color: #bfdbfe; font-size: 1.2rem; font-weight: 500; min-height: 50px; line-height: 1.6; }
 #rpg-cursor { display: inline-block; width: 10px; height: 1.1em; background: #3b82f6; margin-left: 4px; vertical-align: middle; animation: blink 0.8s step-end infinite; } @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
 #rpg-options { display: flex; flex-direction: column; gap: 8px; margin-top: 5px; }
 .rpg-btn { background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); color: #93c5fd; padding: 10px 16px;; border-radius: 6px; cursor: pointer; font-size: 1.0rem; text-align: left; transition: all 0.2s; opacity: 0; transform: translateX(-10px); animation: slideIn 0.3s forwards; white-space: normal; word-break: break-word; line-height: 1.4;}
 .rpg-btn:hover { background: rgba(59, 130, 246, 0.25); border-color: #60a5fa; color: #fff; transform: translateX(2px); }
 @keyframes slideIn { to { opacity: 1; transform: translateX(0); } }
 .rpg-close { position: absolute; top: 5px; right: 8px; font-size: 18px; color: #475569; cursor: pointer; }
 .rpg-close:hover { color: #fff; }
 
  /* --- å†…å®¹å®¹å™¨ --- */
  .container { position: relative; padding: 60px 80px; background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px) saturate(180%); -webkit-backdrop-filter: blur(20px) saturate(180%); border-radius: 20px; box-shadow: 0 20px 50px rgba(59, 130, 246, 0.15); border: 1px solid rgba(255, 255, 255, 0.1); border-top: 4px solid #3b82f6; opacity: 0; animation: fadeUp 0.8s ease-out 0.3s forwards; z-index: 1; transform-style: preserve-3d; transition: transform 0.1s ease-out; overflow: hidden; }
  .container::before { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(800px circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(255, 255, 255, 0.07), transparent 40%); z-index: -1; pointer-events: none; opacity: 0; transition: opacity 0.5s; }
  .container:hover::before { opacity: 1; }
  #main_content table { width: 100% !important; border-collapse: collapse; margin: 20px 0; background: rgba(10, 10, 15, 0.3); border-radius: 8px; overflow: hidden; }
  #main_content th, #main_content td { padding: 12px; border: 1px solid rgba(255, 255, 255, 0.1); }
  #main_content tr { background: rgba(30, 41, 59, 0.8) !important; }    
  #main_content th { color: #60a5fa; font-weight: 600; }
  .typewriter-container { font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; color: #93c5fd; min-height: 1.6em; margin-bottom: 2rem; text-align: center; /* ğŸŒŸ æ ¸å¿ƒä¿®æ”¹ï¼šè®©æ–‡å­—æ°´å¹³å±…ä¸­ */
   width: 100%;       /* ç¡®ä¿å®¹å™¨å æ»¡å…¨å®½ */
    display: flex;     /* ä½¿ç”¨å¼¹æ€§å¸ƒå±€è¾…åŠ©å¯¹é½ */
    justify-content: center; 
    align-items: center;
  }
  .typewriter-cursor { animation: blink-cursor 0.8s infinite; border-left: 3px solid #3b82f6; margin-left: 2px; }
  .nav-badges { margin: 2rem 0; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
  .nav-badges a { opacity: 0; animation: fadeUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; position: relative; z-index: 2; }
  .nav-badges img { height: 28px !important; width: auto; border-radius: 50px; box-shadow: 0 2px 6px rgba(59, 130, 246, 0.15); border: 1.5px solid white; transition: all 0.3s; mix-blend-mode: normal !important; }
  .nav-badges a:hover img { animation: float-hover 2s ease-in-out infinite; box-shadow: 0 8px 20px rgba(59, 130, 246, 0.35); transform: scale(1.1); }
  .nav-badges img.rippling { animation: ripple-wave 0.5s forwards; }
        
  /* --- æŒ‰é’® & æ¨¡å¼ --- */
  .controls-container { position: fixed; top: 20px; right: 20px; display: flex; gap: 15px; z-index: 10000; }
  .ctrl-btn { width: 40px; height: 40px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; backdrop-filter: blur(10px); transition: all 0.3s ease; font-size: 1.2rem; user-select: none; }
  .ctrl-btn:hover { background: rgba(255, 255, 255, 0.2); transform: scale(1.1); }
  #lang-toggle { font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; font-weight: bold; width: auto; padding: 0 10px; border-radius: 20px; }
 
  /* --- â˜ï¸ æŠ¤çœ¼æŸ”å…‰æ¨¡å¼ --- */
  body.light-mode { color: #334155; background-color: #ffffff; }
  body.light-mode .model-watermark-text { color: rgba(51, 65, 85, 0.5); } /*è®©æ°´å°åœ¨æµ…è‰²æ¨¡å¼ä¸‹å˜æˆæ·±ç°è“è‰² */
  body.light-mode #vanta-bg::after { background: radial-gradient(circle at center, rgba(241, 245, 249, 0.7) 0%, #f1f5f9 100%); }
  body.light-mode .container { background: rgba(241, 245, 249, 0.9); border-color: rgba(203, 213, 225, 0.6); box-shadow: 0 20px 50px rgba(148, 163, 184, 0.15); backdrop-filter: blur(25px); }
  body.light-mode #rpg-dialogue { background: #ffffff; border-color: #cbd5e1; box-shadow: 0 10px 30px rgba(148, 163, 184, 0.1); }
  body.light-mode #rpg-text { color: #334155; }
  body.light-mode .rpg-btn { background: rgba(226, 232, 240, 0.6); color: #475569; border-color: rgba(203, 213, 225, 0.8); }
  body.light-mode .rpg-btn:hover { background: #cbd5e1; color: #1e40af; border-color: #94a3b8; }
  body.light-mode #bot-speech { background: #ffffff; color: #334155; border-color: #cbd5e1; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
  body.light-mode .typewriter-container { color: #2563eb; }
  body.light-mode #main_content table { background: #f8fafc;   box-shadow: none; }
  body.light-mode #main_content th { color: #1e293b; background: #e2e8f0 !important; border-color: #cbd5e1; }
  body.light-mode #main_content td { border-color: #e2e8f0; color: #334155; } 
  body.light-mode #main_content tr { background: transparent !important; }
  body.light-mode #main_content tr:hover { background: rgba(0, 0, 0, 0.03) !important;}
  body.light-mode .rpg-close { color: #94a3b8; }
  body.light-mode .rpg-close:hover { color: #ef4444; }
  body.light-mode .ctrl-btn { background: rgba(255, 255, 255, 0.5); border-color: #cbd5e1; color: #64748b; }
  body.light-mode .ctrl-btn:hover { background: #ffffff; color: #0f172a; transform: scale(1.05); }
  body.light-mode .img-caption { color: #2563eb; }
 
  @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes float-bot { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
  @keyframes blink { 0%, 48%, 52%, 100% { height: 0%; } 50% { height: 100%; } }
  @keyframes botEnter { from { opacity: 0; transform: translateX(-50%) translateY(20px); } to { opacity: 1; transform: translateX(-50%) translateY(0); } }
  @keyframes blink-cursor { from, to { opacity: 1; } 50% { opacity: 0; } }
  @keyframes pulse-antenna-breath { 0%, 100% { background: #3b82f6; box-shadow: 0 0 5px #3b82f6; } 50% { background: #93c5fd; box-shadow: 0 0 15px #60a5fa, 0 0 8px #ffffff; } }
  @keyframes mouth-talk { 0% { height: 2px; } 100% { height: 8px; border-radius: 50%; } }
   
  .welcome-modal {
    position: fixed; inset: 0; 
    background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(5px);
    z-index: 100001; 
    display: flex; justify-content: center; align-items: center;
    opacity: 0; pointer-events: none; transition: opacity 0.2s ease;
    padding: 20px;
    cursor: default !important;
  }
  .welcome-modal * { cursor: default !important; }
  .welcome-modal .btn-primary, .welcome-modal .btn-secondary, .welcome-modal .slider { cursor: pointer !important; }
  .welcome-modal.show { opacity: 1; pointer-events: auto; }
   
  .welcome-modal:hover ~ .cursor-dot, .welcome-modal:hover ~ .cursor-outline { opacity: 0 !important; }
   
  .modal-content {
    background: rgba(30, 41, 59, 0.85); 
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(20px);
    padding: 30px; border-radius: 20px; 
    width: 90%; max-width: 400px; text-align: center;
    margin: auto; 
    max-height: 90vh; overflow-y: auto; 
    transform: scale(0.9); transition: transform 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative; 
    padding-bottom: 140px; 
  }
  .welcome-modal.show .modal-content { transform: scale(1); }
   
  .modal-title { font-size: 1.5rem; margin-bottom: 15px; color: #fff; font-weight: 600; }
  .modal-body { font-size: 1rem; color: #cbd5e1; margin-bottom: 25px; line-height: 1.6; }
  .m-zh { display: none; }
 
  .modal-btns { display: flex; flex-direction: column; gap: 10px; }
  .btn-primary, .btn-secondary {
    padding: 12px 20px; border-radius: 10px; font-weight: 600; transition: all 0.2s;
    border: none; font-family: inherit;
  }
  .btn-primary { background: #3b82f6; color: white; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4); }
  .btn-primary:hover { background: #2563eb; transform: translateY(-2px); }
  .btn-secondary { background: rgba(255, 255, 255, 0.1); color: #e2e8f0; }
  .btn-secondary:hover { background: rgba(255, 255, 255, 0.2); }
 
  .modal-lang-switch-container {
    position: absolute; bottom: 60px; left: 50%; transform: translateX(-50%); 
    display: flex; flex-direction: column; align-items: center; gap: 4px; width: 100%; 
  }
  .lang-title { font-size: 0.7rem; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; }
  .lang-row { display: flex; align-items: center; gap: 8px; justify-content: center; font-size: 0.85rem; color: #cbd5e1; font-family: 'JetBrains Mono', monospace; }
  .switch { position: relative; display: inline-block; width: 40px; height: 20px; }
  .switch input { opacity: 0; width: 0; height: 0; }
  .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #475569; transition: .4s; border-radius: 20px; }
  .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%; }
  input:checked + .slider { background-color: #3b82f6; }
  input:focus + .slider { box-shadow: 0 0 1px #3b82f6; }
  input:checked + .slider:before { transform: translateX(20px); }
 
  .modal-watermark {
    position: absolute; bottom: 20px; left: 0; width: 100%; 
    text-align: center; font-size: 0.65rem; color: #94a3b8; font-family: 'JetBrains Mono', monospace; pointer-events: none; opacity: 0.6; 
  }

  /* --- ğŸ¬ è§†é¢‘å¼¹çª—æ ·å¼ --- */
  .video-modal {
    position: fixed; inset: 0;
    background: rgba(0, 0, 0, 0.9); /* æ·±è‰²èƒŒæ™¯ */
    z-index: 100005; /* åªæœ‰å®ƒèƒ½ç›–ä½æœºå™¨äºº */
    display: flex; justify-content: center; align-items: center;
    opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
    backdrop-filter: blur(10px);
  }
  .video-modal.show { opacity: 1; pointer-events: auto; }

  .video-content {
    width: 90%; max-width: 800px;
    background: rgba(15, 23, 42, 1);
    border: 1px solid #3b82f6;
    border-radius: 12px;
    box-shadow: 0 0 50px rgba(59, 130, 246, 0.3);
    overflow: hidden;
    transform: scale(0.9); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }
  .video-modal.show .video-content { transform: scale(1); }

  .video-header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 10px 20px;
    background: rgba(59, 130, 246, 0.1);
    border-bottom: 1px solid rgba(59, 130, 246, 0.3);
    color: #93c5fd; font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;
  }
  .video-close {
    cursor: pointer; font-size: 1.5rem; line-height: 1; color: #64748b; transition: color 0.2s;
  }
  .video-close:hover { color: #ef4444; }

  video#guardian-video {
    width: 100%; display: block; outline: none;
  }
 
  @media (max-width: 768px) { 
    #bot-speech {
      white-space: normal !important; max-width: 200px !important; width: max-content !important; height: auto !important; line-height: 1.5;
      left: auto !important; right: 0 !important; top: -55px !important; border-radius: 12px 12px 0 12px !important; 
      transform: translateX(0) scale(0) !important; transform-origin: bottom right !important; 
    }
    #bot-container.speaking #bot-speech { transform: translateX(0) scale(1) !important; }
    .cursor-dot, .cursor-outline { display: none; } 
    .layout-wrapper { margin-top: 40px !important; }
    .controls-container { top: 15px; right: 15px; gap: 8px; }
    .ctrl-btn { width: 35px; height: 35px; font-size: 1rem; }
    #lang-toggle { font-size: 0.7rem; padding: 0 8px; }
    #bot-container { 
      display: block !important; position: fixed !important; top: auto !important; left: auto !important;
      right: 20px !important; bottom: 30px !important; transform: scale(0.85) translateX(0) !important;
      opacity: 1 !important; animation: none !important;
    }
    #bot-container #rpg-dialogue {
      position: absolute !important; 
      top: auto !important; 
      bottom: 90px !important; 
      right: -15px !important;  /* é”šå®šåœ¨æœºå™¨äººå³ä¾§è¾¹ç¼˜ */
      left: auto !important;    /* è§£å¼€å·¦ä¾§æ­»é”ï¼Œå…è®¸å‘å·¦æ— é™å»¶ä¼¸ */
      width: 360px !important;  /* å¼ºåˆ¶æŠŠå¯¹è¯æ¡†å‘å·¦æ¨å®½ï¼ */
      max-width: 110vw !important; /* æŠµæ¶ˆæœºå™¨äººçš„ç¼©æ”¾æ¯”ä¾‹ */
      transform: translateY(10px) !important;
    }
    #bot-container #rpg-dialogue.active { transform: translateY(0) !important; }
    .container { padding: 30px 20px; } 
    #main_content { overflow-x: auto; }
    .modal-content { padding-bottom: 140px; } 

    /* æ‰‹æœºå±å¹•çª„ï¼Œæœºå™¨äººä¸èƒ½åœ¨å³è¾¹ï¼Œå¾—è·‘åˆ°ä¸‹é¢æŒ‡ä¸Šé¢ */
    #bot-container.guide-mode {
      top: auto !important;
      bottom: 20% !important; /* åœ¨è§†é¢‘ä¸‹æ–¹ */
      left: 50% !important;
      right: auto !important;
      transform: translateX(-50%) scale(1) !important;
    }
     
    /* ç®­å¤´æ”¹ä¸ºå‘ä¸ŠæŒ‡ */
    .guide-arrow {
      left: 50%; top: -40px;
      transform: translateX(-50%) rotate(90deg); /* æ—‹è½¬90åº¦å‘ä¸Š */
    }
     
    /* æ‰‹æœºç«¯ç®­å¤´åŠ¨ç”»ï¼šå‘ä¸Šè·³ */
    #bot-container.guide-mode .guide-arrow {
      animation: point-up 0.8s ease-in-out infinite alternate;
    }
     
    @keyframes point-up {
      from { transform: translateX(-50%) rotate(-90deg) translateY(0); }
      to { transform: translateX(-50%) rotate(-90deg) translateY(-15px); }
    }
  }
</style>

 <script type="module"
  src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js" defer>
</script>
 
</head>
 
<body>
<div id="video-modal" class="video-modal">
  <div class="video-content">
    <div class="video-header">
      <span>ğŸ“½ï¸ DEMO REVIEW PROTOCOL</span>
      <span class="video-close" onclick="closeVideoModal()">Ã—</span>
    </div>
    <video id="guardian-video" controls playsinline>
      <source src="https://github.com/user-attachments/assets/3d1f7740-a5a1-44a2-a549-0b52da2e9e2e" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>
</div>

<div id="welcome-modal" class="welcome-modal">
  <div class="modal-content">
    <div class="modal-title">
      <span class="m-en">âœ¨ Hi, Welcome to E-Link!</span>
      <span class="m-zh">âœ¨ å—¨ï¼æ¬¢è¿è®¿é—®E-Linkï¼</span>
    </div>
    <div class="modal-body">
      <span class="m-en">
       We recommend <b>Dark Mode</b> for a more immersive experience<br>
       <span style="font-size: 0.85rem; color: #94a3b8;">
         (Feel free to tailor your view at the top-right corner)
       </span>
      </span>
      <span class="m-zh">
       ä¸ºå‘ˆç°æœ€ä½³<b>è§†è§‰ä½“éªŒ</b>ï¼Œå»ºè®®ä¿ç•™<b>æ·±è‰²è®¾ç½®</b> <br>
       <span style="font-size: 0.85rem; color: #94a3b8;">
         (æ‚¨å¯éšæ—¶é€šè¿‡å³ä¸Šè§’åˆ‡æ¢è¯­è¨€æˆ–ä¸»é¢˜)
       </span>
      </span>
    </div>
    <div class="modal-btns">
      <button id="modal-keep-dark-btn" class="btn-primary">
        <span class="m-en">ğŸŒ™ Keep Dark Mode</span>
        <span class="m-zh">ğŸŒ™ ä¿æŒæ·±è‰² (æ¨è)</span>
      </button>
      <button id="modal-switch-light-btn" class="btn-secondary">
        <span class="m-en">ğŸ”† Switch to Light Mode</span>
        <span class="m-zh">ğŸ”† åˆ‡æ¢åˆ°æµ…è‰²</span>
      </button>
    </div>
    <div class="modal-lang-switch-container">
      <span class="lang-title">Language / è¯­è¨€</span>
      <div class="lang-row">
        <span>English</span>
        <label class="switch">
          <input type="checkbox" id="modal-lang-toggle-checkbox">
          <span class="slider round"></span>
        </label>
        <span>ç®€ä½“ä¸­æ–‡</span>
      </div>
    </div>
    <div class="modal-watermark">
      <span class="m-en">Webpage Designed by Tianyu Bai Â© 2026</span>
      <span class="m-zh">æœ¬ç½‘é¡µç”± Tianyu Bai è®¾è®¡åˆ¶ä½œ Â© 2026</span>
    </div>
  </div>
</div>
 
<div class="controls-container">
  <div id="lang-toggle" class="ctrl-btn" title="Switch Language">EN/CN</div>
  <div id="theme-toggle" class="ctrl-btn" title="Switch Theme">â˜€ï¸</div>
</div>
 
<div class="cursor-dot"></div>
<div class="cursor-outline"></div>
<div id="progress-bar"></div>
<div id="vanta-bg"></div>
 
<canvas id="meteor-canvas"></canvas>
 
<div id="bot-container" title="Chat with me!">
  <div class="guide-arrow">â¤</div>
  <div class="pulse-ring"></div>
  <div id="bot-speech">System Online.</div>
  <div id="rpg-dialogue">
    <div class="rpg-close">Ã—</div>
    <div><span id="rpg-text">Initializing...</span><span id="rpg-cursor"></span></div>
    <div id="rpg-options"></div>
  </div>
  <div class="bot-antenna"></div>
  <div class="bot-head">
    <div class="bot-eye"><div class="bot-pupil"></div><div class="bot-lid"></div></div>
    <div class="bot-eye"><div class="bot-pupil"></div><div class="bot-lid"></div></div>
    <div class="bot-mouth"></div>
  </div>
</div>
 
<div class="layout-wrapper">
  <div class="container">
    <section id="main_content">
      {{ content }}
    </section>
 
    <div class="typewriter-container">
     <span id="typewriter-text"></span><span class="typewriter-cursor"></span>
    </div>

<footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); text-align: center; color: #94a3b8; font-size: 0.85rem;">

  <div style="margin: 0 auto 25px auto; width: 360px; max-width: 100%; min-height: 240px; display: flex; flex-direction: column; justify-content: center; align-items: center; border: 1px solid rgba(59, 130, 246, 0.4); border-radius: 12px; padding: 15px; background: rgba(19, 25, 42, 0.7); box-shadow: 0 0 20px rgba(59, 130, 246, 0.1); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); overflow: hidden; position: relative;">
    
    <div style="width: 100%; display: flex; justify-content: space-between; align-items: center; font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; margin-bottom: 12px; padding: 0 5px;">
      
      <div style="letter-spacing: 0.5px; animation: text-glow-cyan 3s ease-in-out infinite;">
        <span class="lang-en">â— Worldwide Pageview Data</span>
        <span class="lang-zh">â— å…¨çƒè®¿é—®æ•°æ®å®æ—¶ç›‘æµ‹</span>
      </div>

      <div style="position: relative; display: flex; align-items: center; min-width: 100px; justify-content: flex-end; animation: live-glow-blue 3s ease-in-out infinite;">
        <span class="lang-en" style="opacity: 0.8; margin-right: 4px;">LIVE:</span>
        <span class="lang-zh" style="opacity: 0.8; margin-right: 4px;">åœ¨çº¿äººæ•°:</span>
        
        <span id="live-counter">--</span>
        <span id="plus-one" style="position: absolute; right: -12px; top: -8px; color: #00f2ff; opacity: 0; font-weight: bold; font-size: 0.6rem; text-shadow: 0 0 5px #00f2ff; pointer-events: none;">+1</span>
      </div>
    </div>

    <script type='text/javascript' id='mapmyvisitors' src='https://mapmyvisitors.com/map.js?cl=e2e8f0&w=300&t=m&d=m5eNlZmkObq22GMdcKlpWq0A9hkoWtNuOIvQwtMspNc&ct=e2e8f0&co=13192a'></script>
  </div>

    <p style="margin-bottom: 20px;">
    <span class="lang-en">E-Link â€¢ COPYRIGHT Â© 2026 Tianyu Bai</span>
    <span class="lang-zh">æ˜“é“¾ â€¢ ç‰ˆæƒæ‰€æœ‰ Â© 2026 Tianyu Bai</span>
  </p>

  <style>
    @keyframes text-glow-cyan {
      0% { color: #334155; text-shadow: 0 0 0px rgba(0, 242, 255, 0); }
      50% { color: #00f2ff; text-shadow: 0 0 8px rgba(0, 242, 255, 0.6); }
      100% { color: #334155; text-shadow: 0 0 0px rgba(0, 242, 255, 0); }
    }

    @keyframes live-glow-blue {
      0% { color: #1d4ed8; opacity: 0.7; text-shadow: 0 0 0px rgba(96, 165, 250, 0); }
      50% { color: #60a5fa; opacity: 1; text-shadow: 0 0 10px rgba(96, 165, 250, 0.8); }
      100% { color: #1d4ed8; opacity: 0.7; text-shadow: 0 0 0px rgba(96, 165, 250, 0); }
    }

    @keyframes float-up-fade {
      0% { transform: translateY(0); opacity: 0; }
      20% { opacity: 1; }
      100% { transform: translateY(-12px); opacity: 0; }
    }
    .animate-plus { animation: float-up-fade 1.2s ease-out forwards; }
  </style>

  <script>
    (function() {
      // 1. åˆå§‹åŒ–ï¼šèµ·å§‹äººæ•° 1-2 (åŒ…å«å½“å‰ç”¨æˆ·æœ¬èº«)
      let currentDisplay = Math.floor(Math.random() * 2) + 1; 

      function initCounter() {
        const counterEl = document.getElementById('live-counter');
        const plusEl = document.getElementById('plus-one');
        if(!counterEl || !plusEl) return;
        
        counterEl.textContent = currentDisplay;

        // 2. æ¨¡æ‹ŸçœŸå®è®¿å®¢è¡Œä¸º (12ç§’æ£€æµ‹ä¸€æ¬¡)
        setInterval(() => {
          const rand = Math.random();
          
          // --- è¿›å…¥é€»è¾‘ï¼šä»…åœ¨æ€»æ•°å°äº 3 æ—¶å…è®¸å¢åŠ  ---
          if (rand > 0.8 && currentDisplay < 3) { 
            const maxCanAdd = 3 - currentDisplay; // åŠ¨æ€è®¡ç®—è·ç¦»ä¸Šé™ 3 çš„å‰©ä½™ç©ºä½
            const delta = Math.min(maxCanAdd, (Math.random() > 0.85 ? 2 : 1)); 
            
            plusEl.textContent = '+' + delta;

            // ç‰¹æ•ˆï¼š+2 æ›´åŠ é†’ç›®
            if (delta === 2) {
                plusEl.style.fontWeight = '900';
                plusEl.style.filter = 'brightness(1.5) drop-shadow(0 0 5px #00f2ff)';
            } else {
                plusEl.style.fontWeight = 'bold';
                plusEl.style.filter = 'none';
            }

            plusEl.classList.remove('animate-plus');
            void plusEl.offsetWidth; 
            plusEl.classList.add('animate-plus');
            
            currentDisplay += delta;
            counterEl.textContent = currentDisplay;
            
            // éšæœºç•™å­˜æ—¶é•¿ï¼š10s - 30s
            const stayDuration = Math.floor(Math.random() * 20000) + 10000;
            
            setTimeout(() => {
              if (currentDisplay > 1) {
                currentDisplay -= delta;
                counterEl.textContent = currentDisplay;
              }
            }, stayDuration);

          } else if (rand < 0.15 && currentDisplay > 1) {
            // è‡ªç„¶å‡å‘˜
            currentDisplay--;
            counterEl.textContent = currentDisplay;
          }
        }, 12000); 
      }
      window.addEventListener('load', initCounter);
    })();
  </script>
</footer>
 
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>
<script>
  

// --- ğŸŒ åŒè¯­æ•°æ®æº (æ‰©å±•ç‰ˆ) ---
  const dialogData_EN = {
    "start": {
      text: "Hi! I'm the Connector Guardian. I protect your neural interfaces.",
      options: [ 
          { text: "ğŸ¬ Watch Demo Video", next: "play_video" },
          { text: "ğŸš€ Let's start!", next: "root_menu" } 
      ]
    },
    "play_video": {
       text: "Initiating Cinema Mode... Loading visual data.",
       options: [ { text: "Close Video", next: "start" } ]
    },
    "root_menu": {
      text: "Select a category to inspect:",
      options: [
        { text: "ğŸŒŸ What's Special? (ACE & Zero Force)", next: "innovation" },
        { text: "ğŸ“Š Specifications (Weight/Noise)", next: "specs_menu" },
        { text: "ğŸ›¡ï¸ Reliability & Protection", next: "reliability_menu" },
        { text: "ğŸ”§ Modular Usage", next: "usage_menu" },
        { text: "ğŸŒ Open Source Vision", next: "open_source" },
        { text: "Just browsing", next: "close" }
      ]
    },
    "innovation": {
      text: "I use an Anisotropic Conductive Elastomer (ACE). It shifts the paradigm from 'Rigid Pins' to 'Soft Interconnects'.",
      options: [
        { text: "Why is 'Zero Insertion Force' better?", next: "zero_force" },
        { text: "What is the 'Sandwich' design?", next: "modularity" },
        { text: "Can it scale up?", next: "scalability" },
        { text: "Back to Menu", next: "root_menu" } 
      ]
    },
    "zero_force": {
      text: "Traditional pin-connectors require high force and micro-alignment, risking bent pins. My threaded cap converts manual rotation into gentle, uniform pressure. No pushing, no damage!",
      options: [ { text: "Cool! Back.", next: "innovation" } ]
    },
    "modularity": {
      text: "It's a modular 'sandwich' structure. Housing, Adapter PCB, and Headstage can be replaced independently. You don't need to discard the whole setup if one part breaks, saving significant costs.",
      options: [ { text: "Smart design. Back.", next: "innovation" } ]
    },
    "scalability": {
      text: "Traditional pins struggle with density. Thanks to the ~100 Âµm pitch elastomer, I offer a clear scaling roadmap: 256 -> 512 -> 1024 channels within the same footprint!",
      options: [ { text: "Future-proof! Back.", next: "innovation" } ]
    },
    "specs_menu": {
      text: "Checking Diagnostics... Which parameter concerns you?",
      options: [
        { text: "Is it heavy? (Weight)", next: "weight" },
        { text: "Does it get hot? (Thermal)", next: "thermal" },
        { text: "How clean is the signal? (Noise)", next: "noise" },
        { text: "Back to Menu", next: "root_menu" }
      ]
    },
    "weight": {
      text: "Ultra-light! Detached core is only 2.8g. Fully housed, I am 6.6g, vastly reducing the burden on freely moving animals.",
      options: [ { text: "Good for mice/rats.", next: "specs_menu" } ]
    },
    "thermal": {
      text: "I stay cool. Steady-state temperature is 30.5Â°C, well below the 37Â°C biological threshold. No active cooling required.",
      options: [ { text: "Safe confirmed.", next: "specs_menu" } ]
    },
    "noise": {
      text: "Crystal clear. Through optimized shielding, my RMS noise floor is 2.68 ÂµV, practically matching the amplifier chip's theoretical limit.",
      options: [ { text: "Great specs.", next: "specs_menu" } ]
    },
    "reliability_menu": {
      text: "I act as physical armor for delicate probes. What is your concern?",
      options: [
        { text: "Lifespan (Cycles)", next: "cycles" },
        { text: "What if I align it wrong?", next: "misalignment" },
        { text: "Environmental Protection?", next: "protection" },
        { text: "Back to Menu", next: "root_menu" }
      ]
    },
    "cycles": {
      text: "Proven by a third-party tester, the system maintains a connection yield of >97% after hundreds of high-intensity mating cycles. The conductive elastomer demonstrates outstanding fatigue resistance and mechanical longevity.",
      options: [ { text: "Solid.", next: "reliability_menu" } ]
    },
    "misalignment": {
      text: "I am self-aligning! The elastomer has 'structural redundancy' (pitch < pad size), naturally forgiving minor manual misalignments.",
      options: [ { text: "Very forgiving.", next: "reliability_menu" } ]
    },
    "protection": {
      text: "The threaded base and potting create a closed isolation chamber. It blocks fluids, dust, and stays rock-solid even if the animal scratches it.",
      options: [ { text: "True armor.", next: "reliability_menu" } ]
    },
    "usage_menu": {
      text: "Designed for researchers. Ask me about usage:",
      options: [
        { text: "Is assembly difficult?", next: "assembly" },
        { text: "Compatible Systems?", next: "system" },
        { text: "For freely moving animals?", next: "animal" },
        { text: "Back to Menu", next: "root_menu" }
      ]
    },
    "assembly": {
      text: "Extremely easy. It's a 'plug-and-play' twist assembly. The built-in foam washer automatically balances the pressure.",
      options: [ { text: "User friendly.", next: "usage_menu" } ]
    },
    "system": {
      text: "High integration! Packs 4 Intan RHD2164 chips. Seamlessly compatible with Intan, Open-Ephys, and NeuroNexus DAQ systems.",
      options: [ { text: "Perfect.", next: "usage_menu" } ]
    },
    "animal": {
      text: "Absolutely. The low profile fits mechanical commutators, allowing natural behavior without cable twisting.",
      options: [ { text: "Show me the files!", next: "show_badges" } ]
    },
    "open_source": {
      text: "E-Link is more than a connector; it's an Open Source infrastructure for neuroengineering. We solve the 'packaging' bottleneck so you can focus on brain science!",
      options: [ { text: "Awesome! Show me the repo.", next: "show_badges" } ]
    },
    "show_badges": {
      text: "Scroll down to the bottom! ğŸ‘‡ Those icons are your gateway to the Code, Fabrication Files, and Full System CAD.",
      options: [ { text: "Thanks, Guardian!", next: "close" } ]
    }
  };

  const dialogData_ZH = {
    "start": {
      text: "ä½ å¥½ï¼æˆ‘æ˜¯æ˜“é“¾çš„é—®ç­”å‘å¯¼ï¼Œæˆ‘è‡´åŠ›äºä¸ºé«˜å¯†åº¦æŸ”æ€§ç¥ç»æ¢é’ˆæä¾›ç¨³å¥ã€å¯é çš„ä¿¡å·ä¼ è¾“è§£å†³æ–¹æ¡ˆ",
      options: [ 
        { text: "ğŸ¬ è§‚çœ‹ç»„è£…æ¼”ç¤ºè§†é¢‘", next: "play_video" },
        { text: "ğŸš€ å¼€å¯ç¡¬æ ¸æ¢ç´¢ï¼", next: "root_menu" } 
      ]
    },
    "play_video": {
       text: "æ­£åœ¨å¯åŠ¨å½±é™¢æ¨¡å¼ï¼Œè°ƒå–è§†è§‰æ•°æ®ä¸­...",
       options: [ { text: "å…³é—­è§†é¢‘", next: "start" } ]
    },
    "root_menu": {
      text: "ç³»ç»Ÿå·²å°±ç»ªã€‚è¯·é€‰æ‹©æƒ³è¦å’¨è¯¢çš„ç±»åˆ«ï¼š",
      options: [
        { text: "ğŸŒŸ æ ¸å¿ƒäº®ç‚¹ (å¼¹æ€§äº’è¿ä¸é›¶æ’æ‹”)", next: "innovation" },
        { text: "ğŸ“Š è§„æ ¼å‚æ•° (é‡é‡/å™ªéŸ³/æ¸©åº¦)", next: "å‚æ•°èœå•" },
        { text: "ğŸ›¡ï¸ å¯é æ€§ä¸ç‰©ç†é˜²æŠ¤", next: "å¯é æ€§èœå•" },
        { text: "ğŸ”§ æ¨¡å—åŒ–ä½¿ç”¨ä¸å…¼å®¹", next: "usage_menu" },
        { text: "ğŸŒ äº†è§£æœ¬å¼€æºé¡¹ç›®", next: "open_source" },
        { text: "éšä¾¿çœ‹çœ‹", next: "close" }
      ]
    },
    "innovation": {
      text: "æˆ‘å¼•å…¥äº†å„å‘å¼‚æ€§å¯¼ç”µå¼¹æ€§ä½“ (ACE)ã€‚å®ç°äº†ä»â€œåˆšæ€§é’ˆè„šâ€åˆ°â€œå¼¹æ€§ä¸­ä»‹å±‚â€çš„èŒƒå¼é‡æ„",
      options: [
        { text: "â€œé›¶æ’æ‹”åŠ›â€æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ", next: "é›¶æ’æ‹”åŠ›" },
        { text: "ä»€ä¹ˆæ˜¯â€œä¸‰æ˜æ²»â€æ¨¡å—åŒ–ç»“æ„ï¼Ÿ", next: "æ¨¡å—åŒ–" },
        { text: "é€šé“æ•°èƒ½æ‰©å±•å—ï¼Ÿ", next: "å¯æ‹“å±•æ€§" },
        { text: "è¿”å›ä¸»èœå•", next: "root_menu" } 
      ]
    },
    "é›¶æ’æ‹”åŠ›": {
      text: "ä¼ ç»Ÿæ’é’ˆä¸ä»…éš¾å¯¹å‡†ï¼Œæ’æ‹”åŠ›è¿˜ä¼šæŸä¼¤æ¢é’ˆã€‚åˆ©ç”¨â€œæ‹§ç“¶ç›–â€åŸç†ï¼Œå°†æ‰­çŸ©è½¬åŒ–ä¸ºå‡åŒ€çš„è½´å‘å‹åŠ›ï¼Œç‰©ç†å±‚é¢å½»åº•å‘Šåˆ«æ–­é’ˆå’Œå¼¯é’ˆï¼",
      options: [ { text: "ä»¥æŸ”å…‹åˆšï¼", next: "innovation" } ]
    },
    "æ¨¡å—åŒ–": {
      text: "å¤–å£³ã€è½¬æ¥æ¿ã€æ”¾å¤§å™¨æ¿ï¼ˆHeadstageï¼‰å‡å¯ç‹¬ç«‹æ›´æ¢ã€‚å±€éƒ¨æŸåæ— éœ€æ•´å¥—æŠ¥åºŸï¼Œèƒ½æ˜¾è‘—é™ä½ç§‘ç ”å›¢é˜Ÿçš„ç»´æŠ¤æˆæœ¬ã€‚",
      options: [ { text: "ç»æµåŒ–æ–¹æ¡ˆï¼Œè¿”å›", next: "innovation" } ]
    },
    "å¯æ‹“å±•æ€§": {
      text: "ä¼ ç»Ÿæ’é’ˆæ–¹æ¡ˆåœ¨æé«˜é€šé“ä¸‹ä½“ç§¯åºå¤§ã€‚å¾—ç›Šäºç™¾å¾®ç±³çº§å¯¼ç”µæŸ±ï¼Œæˆ‘åœ¨æå°ä½“ç§¯å†…è§„åˆ’äº† 256 â†’ 512 â†’ 1024 é€šé“çš„æ¼”è¿›è·¯çº¿ã€‚",
      options: [ { text: "èƒ½å¤Ÿæ‹“å±•æ›´å¤šï¼Œè¿”å›", next: "innovation" } ]
    },
    "å‚æ•°èœå•": {
      text: "æ­£åœ¨è¯»å–åº•å±‚ä¼ æ„Ÿå™¨æ•°æ®... ä½ æƒ³äº†è§£ä»€ä¹ˆï¼Ÿ",
      options: [
        { text: "å¯¹å°é¼ è´Ÿæ‹…å¤§å—ï¼Ÿ (é‡é‡)", next: "weight" },
        { text: "è¿è¡Œä¼šå‘çƒ­å—ï¼Ÿ (çƒ­å­¦)", next: "thermal" },
        { text: "ä¿¡å·ä¿çœŸåº¦å¦‚ä½•ï¼Ÿ (å™ªéŸ³)", next: "noise" },
        { text: "è¿”å›ä¸»èœå•", next: "root_menu" }
      ]
    },
    "weight": {
      text: "è½»é‡åŒ–è®¾è®¡ï¼æ ¸å¿ƒç»„ä»¶ä»… 2.8gï¼Œæ•´æœº(å«å¤–å£³)é‡ 6.6gï¼Œå¤§å¹…é™ä½åŠ¨ç‰©çš„å¤´éƒ¨è´Ÿé‡ã€‚",
      options: [ { text: "å¾ˆé€‚åˆè‡ªç”±æ´»åŠ¨å®éªŒ", next: "å‚æ•°èœå•" } ]
    },
    "thermal": {
      text: "è¿è½¬æ—¶ç¨³æ€æ¸©åº¦ä»…ä¸º 30.5Â°Cï¼Œè¿œä½äº 37Â°C çš„ç”Ÿç‰©é˜ˆå€¼ï¼Œæ— éœ€ä»»ä½•ä¸»åŠ¨æ•£çƒ­ã€‚",
      options: [ { text: "çƒ­å®‰å…¨æ€§å·²ç¡®è®¤", next: "å‚æ•°èœå•" } ]
    },
    "noise": {
      text: "å¾—ç›Šäºå±è”½è®¾è®¡ï¼Œæˆ‘çš„å®æµ‹ RMS åŸºåº•å™ªå£°ä½è‡³ 2.68 ÂµVï¼Œæ¥è¿‘æ”¾å¤§å™¨èŠ¯ç‰‡çš„ç†æƒ³æ•°æ®æé™ï¼Œç¡®ä¿å•ç»†èƒçº§çš„ä¿¡å·ä¿çœŸåº¦ã€‚",
      options: [ { text: "å‚æ•°ç¨³å¥", next: "å‚æ•°èœå•" } ]
    },
    "å¯é æ€§èœå•": {
      text: "æˆ‘æ˜¯è„†å¼±æ¢é’ˆçš„â€œé˜²æŠ¤é“ ç”²â€ã€‚ä½ æƒ³äº†è§£å“ªæ–¹é¢çš„å¯é æ€§ï¼Ÿ",
      options: [
        { text: "èƒ½æ‰­è½¬å‹åˆå¤šå°‘æ¬¡ï¼Ÿ (å¯¿å‘½)", next: "cycles" },
        { text: "æ“ä½œæ—¶å€™æ²¡å®Œå…¨å¯¹å‡†æ€ä¹ˆåŠï¼Ÿ", next: "misalignment" },
        { text: "åŠ¨ç‰©æŠ“æŒ å’Œå¤´éƒ¨ç»„ç»‡æ¶²æœ‰å¯èƒ½ä¾µå…¥ï¼Ÿ", next: "protection" },
        { text: "è¿”å›ä¸»èœå•", next: "root_menu" }
      ]
    },
    "cycles": {
      text: "ç»æ•°ä½ç‹¬ç«‹æµ‹è¯•è€…å®æµ‹ï¼Œåœ¨å†ç»æ•°ç™¾æ¬¡é«˜å¼ºåº¦çš„è¿ç»­æ‹§è½¬åï¼Œæˆ‘çš„è¿æ¥è‰¯ç‡ä¾ç„¶åšæŒºåœ¨ 97% ä»¥ä¸Šã€‚å¼¹æ€§å¯¼ç”µä½“å±•ç°å‡ºäº†æå…¶å“è¶Šçš„æŠ—ç–²åŠ³å¯¿å‘½ã€‚",
      options: [ { text: "ç»ä¹…è€ç”¨", next: "å¯é æ€§èœå•" } ]
    },
    "misalignment": {
      text: "è‡ªç„¶å…å¯¹é½éœ€æ±‚ï¼Œå¯¼ç”µæŸ±å…·å¤‡â€œç»“æ„å†—ä½™â€ï¼Œå…è®¸ç‰©ç†æ“ä½œä¸Šçš„è½»å¾®åå·®ï¼Œå¯¹æ“ä½œè€…æå…¶å‹å¥½ã€‚",
      options: [ { text: "å®¹é”™ç‡é«˜", next: "å¯é æ€§èœå•" } ]
    },
    "protection": {
      text: "æ²¡é—®é¢˜ï¼èºçº¹åŸºåº§æ„å»ºäº†ä¸€ä¸ªå°é—­çš„ç‰©ç†é˜²æŠ¤èˆ±ï¼Œé˜»éš”ä½“æ¶²ä¸ç²‰å°˜ï¼Œæœ‰æ•ˆé˜²æ­¢åŠ¨ç‰©æŠ“æŒ äº§ç”Ÿçš„ç ´åã€‚",
      options: [ { text: "çœŸæ­£çš„è£…ç”²", next: "å¯é æ€§èœå•" } ]
    },
    "usage_menu": {
      text: "æ˜“é“¾ç³»ç»Ÿçº§æ•´åˆæ–¹æ¡ˆé™ä½å®éªŒé—¨æ§›ã€‚è¯·é—®ï¼š",
      options: [
        { text: "ç»„è£…éš¾åº¦å¤§å—ï¼Ÿ", next: "assembly" },
        { text: "å¯ä»¥ç›´æ¥æ¥æˆ‘çš„è®¾å¤‡å—ï¼Ÿ", next: "system" },
        { text: "åŠ¨ç‰©è‡ªç”±æ´»åŠ¨å®éªŒè¡¨ç°å¦‚ä½•ï¼Ÿ", next: "animal" },
        { text: "è¿”å›ä¸»èœå•", next: "root_menu" }
      ]
    },
    "assembly": {
      text: "éå¸¸ç®€å•ã€‚æ¨¡å—æœºæ¢°åŒ–ç»“æ„å³æ‹§å³ç”¨ã€‚å†…éƒ¨æ³¡æ²«å«åœˆä¼šè‡ªåŠ¨å®Œæˆå‹åŠ›è¡¥å¿ã€‚",
      options: [ { text: "çœæ—¶çœåŠ›", next: "usage_menu" } ]
    },
    "system": {
      text: "å†…éƒ¨é›†æˆ 4 é¢— Intançš„RHD2164èŠ¯ç‰‡ã€‚è¾“å‡ºä¿¡å·å®Œç¾å…¼å®¹ Intanã€Open-Ephysã€NeuroNexus ç­‰ä¸»æµé‡‡é›†å·¥ä½œç«™ã€‚",
      options: [ { text: "æ— ç¼å¯¹æ¥", next: "usage_menu" } ]
    },
    "animal": {
      text: "æä½³ï¼ä½å‰–é¢åŸºåº§è®¾è®¡é€‚é…æœºæ¢°æ¢å‘å™¨ (Commutator)ï¼Œçº¿ç¼†ä¸æ‰“ç»“ï¼Œä¿éšœåŠ¨ç‰©æœ€è‡ªç„¶çš„è¡Œä¸ºè½¨è¿¹ã€‚",
      options: [ { text: "å“ªé‡Œå¯ä»¥è·å–å¼€æºæ–‡ä»¶ï¼Ÿ", next: "å¾½ç« æŒ‡å¼•" } ]
    },
    "open_source": {
      text: "æ˜“é“¾æ˜¯ç”±ç¾å›½è¾¾ç‰¹èŒ…æ–¯å­¦é™¢Tianyu Baiä¸»å¯¼è®¾è®¡å¼€å‘çš„ä¸€é¡¹è„‘æœºæ¢é’ˆè¿æ¥æŠ€æœ¯ï¼Œæ›´æ˜¯å±äºç¥ç»å·¥ç¨‹ç¤¾åŒºçš„å¼€æºåŸºç¡€è®¾æ–½ã€‚é€šè¿‡è§£å†³æœ€åçš„â€œäº’è¿â€çŸ­æ¿ï¼Œè®¾è®¡å›¢é˜Ÿå¸Œæœ›è®©ç ”ç©¶è€…èƒ½å°†æ›´å¤šç²¾åŠ›æŠ•å…¥åˆ°è„‘ç§‘å­¦ä¸­ï¼",
      options: [ { text: "è‡´æ•¬ï¼å¸¦æˆ‘å»çœ‹çœ‹å¼€æºä»“åº“", next: "å¾½ç« æŒ‡å¼•" } ]
    },
    "å¾½ç« æŒ‡å¼•": {
      text: "ä¸€ç›´æ»‘åˆ°é¡µé¢åº•éƒ¨ ğŸ‘‡ï¼ç‚¹å‡»ä¸‹é¢çš„GitHubå¾½ç« ï¼Œä½ å¯ä»¥ç›´æ¥ä¸‹è½½åˆ¶é€ æ–‡ä»¶ (Gerber/STL)ã€BOM è¡¨å’Œå®Œæ•´ä»£ç ã€‚",
      options: [ { text: "è°¢è°¢æ˜“é“¾å‘å¯¼ï¼", next: "close" } ]
    }
  };
      
  // é»˜è®¤ä½¿ç”¨è‹±æ–‡
  let currentLang = 'en';
  let dialogData = dialogData_EN;

  let vantaEffect;
   
  // ğŸ”¥ ç¬¬ä¸€é˜¶æ®µï¼šDOM åŠ è½½å®Œæˆï¼Œç«‹åˆ»å¤„ç†é¦–å±
  document.addEventListener("DOMContentLoaded", function() {
      // 0. ğŸ”¥ åˆå§‹åŒ– Lenis å¹³æ»‘æ»šåŠ¨
      // è¿™é‡Œå¯ä»¥è°ƒæ•´ duration (æƒ¯æ€§æ—¶é•¿) å’Œ easing (ç¼“åŠ¨æ›²çº¿)
      const lenis = new Lenis({
        duration: 1.2,
        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
        direction: 'vertical',
        gestureDirection: 'vertical',
        smooth: true,
        mouseMultiplier: 1,
        smoothTouch: false, // ç§»åŠ¨ç«¯é€šå¸¸ä¿ç•™åŸç”Ÿæ»šåŠ¨ä½“éªŒæ›´å¥½ï¼Œå¦‚éœ€å¼€å¯æ”¹ä¸º true
        touchMultiplier: 2,
      })

      // Lenis åŠ¨ç”»å¾ªç¯
      function raf(time) {
        lenis.raf(time)
        requestAnimationFrame(raf)
      }
      requestAnimationFrame(raf);

      // 1. ç«‹å³å¯åŠ¨ Vanta èƒŒæ™¯ (æ¢å¤æ»¡è¡€å¯†åº¦ç‰ˆï¼Œä½†ä¿ç•™æ‰‹æœºç«¯ä½åˆ†å±æ¸²æŸ“)
      if (window.VANTA) { 
        vantaEffect = VANTA.NET({
          el: "#vanta-bg",
        // æ¢å¤ 1.0ï¼Œæ‹’ç»å¼ºè¡Œæ‹‰ä¼¸å¯¼è‡´çš„å˜äº®å’Œå‘ç³Šï¼
          scale: 1.00, 
          scaleMobile: 1.00, 
          
          // æ¢å¤ä½ æœ€åˆè®¾è®¡çš„å®Œç¾å¯†åº¦æ¯”ä¾‹
          points: 18.00,        
          maxDistance: 28.00,   
          spacing: 16.00,       
          
          // æ¢å¤åŸå§‹çš„é¼ æ ‡å’Œè§¦æ‘¸äº’åŠ¨
          mouseControls: true, 
          touchControls: true, 
          gyroControls: false,
          
          minHeight: 200.00, 
          minWidth: 200.00, 
          color: 0x3b82f6, 
          backgroundColor: 0x0a0a0f, 
          showDots: true
        });
      }

      // 2. å¯åŠ¨æµæ˜Ÿç‰¹æ•ˆ
      initMeteors();

      // 3. æ™ºèƒ½åŠ è½½ç­–ç•¥ - é˜¶æ®µä¸€
      // å…ˆæŠŠæ‰€æœ‰å›¾ç‰‡è®¾ä¸º lazyï¼Œé˜²æ­¢é˜»å¡é¦–å±ï¼Œé™¤éå®ƒæ˜¯å‰ä¸¤å¼ 
      const images = document.querySelectorAll('#main_content img');
      images.forEach((img, index) => {
          if (index < 2) {
              // é¦–å±å›¾ç‰‡ï¼šç«‹å³åŠ è½½
              img.setAttribute('loading', 'eager'); 
              img.setAttribute('fetchpriority', 'high'); 
          } else {
              // å…¶ä»–å›¾ç‰‡ï¼šå…ˆæš‚ç¼“
              if(!img.getAttribute('loading')) {
                 img.setAttribute('loading', 'lazy');
              }
          }
      });
  });

  const textsEN = ["Welcome to this webpageï¼", "Thanks for visiting us!", "Stay tuned!"];
  const textsZH = ["æ¬¢è¿è®¿é—®æœ¬ç½‘é¡µï¼", "æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼", "æ¬¢è¿å¸¸æ¥è®¿é—®ï¼"];
  let texts = textsEN; // é»˜è®¤æ–‡æœ¬
  
  let textIdx = 0, charIdx = 0, isDeleting = false;
  function type() {
    const currentText = texts[textIdx];
    const display = isDeleting ? currentText.substring(0, charIdx--) : currentText.substring(0, charIdx++);
    document.getElementById('typewriter-text').textContent = display;
    let speed = isDeleting ? 50 : 100;
    if (!isDeleting && charIdx === currentText.length + 1) { isDeleting = true; speed = 2000; } 
    else if (isDeleting && charIdx === 0) { isDeleting = false; textIdx = (textIdx + 1) % texts.length; speed = 500; }
    setTimeout(type, speed);
  }

  // --- ğŸ”¥ ç¥ç»å…ƒæµæ˜Ÿç‰¹æ•ˆé€»è¾‘ --- 
  function initMeteors() {
    const canvas = document.getElementById('meteor-canvas');
    if(!canvas) return;
    const ctx = canvas.getContext('2d');
    let width, height;
    function resizeCanvas() {
      width = window.innerWidth;
      height = window.innerHeight;
     // ğŸŸ¢ è·å–è®¾å¤‡åƒç´ æ¯”ï¼Œè§£å†³é«˜åˆ†å±æ¨¡ç³Šé—®é¢˜
      const dpr = Math.min(window.devicePixelRatio || 1, 2); // é™åˆ¶æœ€å¤§ä¸º2
      canvas.width = width * dpr;
      canvas.height = height * dpr;
      canvas.style.width = `${width}px`;
      canvas.style.height = `${height}px`;
      ctx.scale(dpr, dpr); // æ”¾å¤§ç»˜å›¾ä¸Šä¸‹æ–‡
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    class Meteor {
      constructor() { this.reset(); }
      reset() {
        this.x = Math.random() * width;
        this.y = Math.random() * height;
        this.len = Math.random() * 100 + 50;
        this.speed = Math.random() * 1 + 1;
        this.size = Math.random() * 1 + 0.5;
        this.angle = (Math.PI * 0.75) + (Math.random() - 0.5) * 0.5;
        this.opacity = 0;
        this.state = 'fadein'; // fadein, active, fadeout
        this.life = 0;
        this.maxLife = Math.random() * 30 + 20; // å­˜æ´»å¸§æ•°
      }
      update() {
        this.x += Math.cos(this.angle) * this.speed;
        this.y += Math.sin(this.angle) * this.speed;
        if(this.state === 'fadein') {
           this.opacity += 0.1;
           if(this.opacity >= 1) this.state = 'active';
        } else if(this.state === 'active') {
           this.life++;
           if(this.life > this.maxLife) this.state = 'fadeout';
        } else if(this.state === 'fadeout') {
           this.opacity -= 0.05;
           if(this.opacity <= 0) this.reset();
        }
        if(this.x < -100 || this.x > width + 100 || this.y < -100 || this.y > height + 100) {
           this.reset();
        }
      }
      draw() {
        if(this.opacity <= 0) return;
        const tailX = this.x - Math.cos(this.angle) * this.len;
        const tailY = this.y - Math.sin(this.angle) * this.len;
        const gradient = ctx.createLinearGradient(this.x, this.y, tailX, tailY);
        gradient.addColorStop(0, `rgba(96, 165, 250, ${this.opacity})`); 
        gradient.addColorStop(1, `rgba(59, 130, 246, 0)`);  
        ctx.beginPath();
        ctx.moveTo(this.x, this.y);
        ctx.lineTo(tailX, tailY);
        ctx.strokeStyle = gradient;
        ctx.lineWidth = this.size;
        ctx.lineCap = 'round';
        ctx.stroke();
      }
    }
    
    const meteors = [];
    const meteorCount = 8; 
    for(let i=0; i<meteorCount; i++) {
       const m = new Meteor();
       m.opacity = 0; 
       m.life = Math.random() * 50;
       meteors.push(m);
    }
    
    function animateMeteors() {
      ctx.clearRect(0, 0, width, height);
      meteors.forEach(m => { m.update(); m.draw(); });
      requestAnimationFrame(animateMeteors);
    }
    animateMeteors();
  }
 
  document.addEventListener("DOMContentLoaded", function() {
    type();
    const cursorDot = document.querySelector('.cursor-dot');
    const cursorOutline = document.querySelector('.cursor-outline');
    const container = document.querySelector('.container');
    const pupils = document.querySelectorAll('.bot-pupil');
    const botContainer = document.getElementById('bot-container');
    const botSpeech = document.getElementById('bot-speech');
        
    const rpgDialogue = document.getElementById('rpg-dialogue');
    const rpgText = document.getElementById('rpg-text');
    const rpgOptions = document.getElementById('rpg-options');
    const rpgClose = document.querySelector('.rpg-close');
    let typeTimer = null;
 
    // --- ğŸ”¥ å¼¹çª—é€»è¾‘ ---
    const welcomeModal = document.getElementById('welcome-modal');
    const modalKeepDarkBtn = document.getElementById('modal-keep-dark-btn');
    const modalSwitchLightBtn = document.getElementById('modal-switch-light-btn');
    const modalLangCheckbox = document.getElementById('modal-lang-toggle-checkbox');
    let modalIsZh = false; 
 
    setTimeout(() => {
      welcomeModal.classList.add('show');
    }, 10);
 
    // --- ğŸ¤– æç¤ºè¯­è½®æ’­ ---
    let idleInterval;
    let tipIndex = 0;
 
    function startIdleTips() {
      if(idleInterval) clearInterval(idleInterval);
      const enTips = ["Click me for guide!", "I'm here to help!"];
      const zhTips = ["æˆ‘æ˜¯E-Linkæ™ºèƒ½å‘å¯¼", "ğŸ¤–â€˜æˆ³â€™æˆ‘è„‘è¢‹ä¸æˆ‘äº’åŠ¨å§ï¼"];
      const runCycle = () => {
         const tips = currentLang === 'en' ? enTips : zhTips;
         botSay(tips[tipIndex], 3000); 
         tipIndex = (tipIndex + 1) % 2;
      };
      runCycle(); 
      idleInterval = setInterval(runCycle, 3500);
    }
 
    function closeModal() {
      welcomeModal.classList.remove('show');
      if (modalIsZh) {
        if (currentLang !== 'zh') langToggle.click(); 
      } else {
        if (currentLang === 'zh') langToggle.click();
      }
      setTimeout(() => {
          botContainer.classList.add('attention-jump'); 
          startIdleTips();
          setTimeout(() => {
              botContainer.classList.remove('attention-jump');
          }, 3200);
      }, 100);
    }
 
    modalKeepDarkBtn.addEventListener('click', closeModal);
    modalSwitchLightBtn.addEventListener('click', () => {
      themeToggle.click(); 
      closeModal();         
    });
 
    modalLangCheckbox.addEventListener('change', () => {
      const enTexts = document.querySelectorAll('.m-en');
      const zhTexts = document.querySelectorAll('.m-zh');
      modalIsZh = modalLangCheckbox.checked;
      if (modalIsZh) {
        enTexts.forEach(el => el.style.display = 'none');
        zhTexts.forEach(el => el.style.display = 'inline'); 
      } else {
        zhTexts.forEach(el => el.style.display = 'none');
        enTexts.forEach(el => el.style.display = 'inline');
      }
    });
 
    // --- åˆ‡æ¢é€»è¾‘ ---
    const themeToggle = document.getElementById('theme-toggle');
    const langToggle = document.getElementById('lang-toggle');
    let isLight = false;
        
    themeToggle.addEventListener('click', () => {
      isLight = !isLight;
      document.body.classList.toggle('light-mode');
      if (isLight) {
        themeToggle.textContent = "ğŸŒ™"; 
        if (vantaEffect) vantaEffect.setOptions({ color: 0x2563eb, backgroundColor: 0xf1f5f9, points: 12.00, maxDistance: 24.00 });
      } else {
        themeToggle.textContent = "â˜€ï¸"; 
        if (vantaEffect) vantaEffect.setOptions({ color: 0x3b82f6, backgroundColor: 0x0a0a0f, points: 18.00, maxDistance: 28.00 });
      }
    });
 
    langToggle.addEventListener('click', () => {
      const enContent = document.querySelectorAll('.lang-en');
      const zhContent = document.querySelectorAll('.lang-zh');
      if (currentLang === 'en') {
           currentLang = 'zh';
           dialogData = dialogData_ZH; 
           texts = textsZH;            
           langToggle.textContent = "ä¸­ / è‹±";
           enContent.forEach(el => el.style.display = 'none');
           zhContent.forEach(el => el.style.display = 'block');
      } else {
           currentLang = 'en';
           dialogData = dialogData_EN;
           texts = textsEN;
           langToggle.textContent = "EN / CN";
           enContent.forEach(el => el.style.display = 'block');
           zhContent.forEach(el => el.style.display = 'none');
      }
      textIdx = 0; charIdx = 0; isDeleting = false;
      if(rpgDialogue.classList.contains('active')) closeDialogue();
      if (!rpgDialogue.classList.contains('active') && idleInterval) {
           startIdleTips();
      }
    });
 
    let mouseX = window.innerWidth / 2;
    let mouseY = 100;
    let ticking = false;
// é¢„å­˜å®¹å™¨ä½ç½®ï¼Œé¿å…åœ¨ mousemove é‡Œå®æ—¶è¯»å–è§¦å‘ Reflow
let containerRect = container ? container.getBoundingClientRect() : null;
window.addEventListener('resize', () => {
    if(container) containerRect = container.getBoundingClientRect();
});

// --- 2. å”¯ä¸€çš„é¼ æ ‡ç›‘å¬å™¨ ---
window.addEventListener('mousemove', (e) => {
    if (window.innerWidth <= 768) return; 

    mouseX = e.clientX;
    mouseY = e.clientY;

    if (!ticking) {
        window.requestAnimationFrame(() => {
            updateUI();
            ticking = false;
        });
        ticking = true;
    }
});

// --- 3. å”¯ä¸€çš„æ›´æ–°å‡½æ•° ---
function updateUI() {
    // A. å…‰æ ‡æ§åˆ¶ (GPU åŠ é€Ÿ)
    if(cursorDot) cursorDot.style.transform = `translate3d(${mouseX}px, ${mouseY}px, 0) translate(-50%, -50%)`;
    if(cursorOutline) cursorOutline.style.transform = `translate3d(${mouseX}px, ${mouseY}px, 0) translate(-50%, -50%)`;

    // B. å®¹å™¨ 3D æ—‹è½¬
    if (container) {
        const rx = (window.innerWidth / 2 - mouseX) / 50; 
        const ry = (window.innerHeight / 2 - mouseY) / 50;
        container.style.transform = `rotateY(${rx * -1}deg) rotateX(${ry}deg)`;
        
        if(containerRect) {
            container.style.setProperty("--mouse-x", `${mouseX - containerRect.left}px`);
            container.style.setProperty("--mouse-y", `${mouseY - containerRect.top}px`);
        }
    }

    // C. æœºå™¨äººçœ¼ç›
    pupils.forEach(p => {
        const rect = p.parentElement.getBoundingClientRect(); 
        const cx = rect.left + rect.width / 2, cy = rect.top + rect.height / 2;
        const angle = Math.atan2(mouseY - cy, mouseX - cx);
        const dist = Math.min(6, Math.hypot(mouseX - cx, mouseY - cy) / 15);
        p.style.transform = `translate(calc(-50% + ${Math.cos(angle) * dist}px), calc(-50% + ${Math.sin(angle) * dist}px))`;
    });
}
 
    window.addEventListener('scroll', () => {
      const scrolled = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
      const pb = document.getElementById("progress-bar");
      if(pb) pb.style.width = scrolled + "%";
      if(botContainer && window.innerWidth > 768) {
        if(window.scrollY > 200) { botContainer.classList.add('fixed-mode'); } 
        else { botContainer.classList.remove('fixed-mode'); }
      }
    });
 
    function botSay(text, duration = 1000) {
      if(!botSpeech || !botContainer || rpgDialogue.classList.contains('active')) return; 
      botSpeech.textContent = text;
      botContainer.classList.add('speaking');
      if(botContainer.speechTimer) clearTimeout(botContainer.speechTimer);
      botContainer.speechTimer = setTimeout(() => {
        botContainer.classList.remove('speaking');
      }, duration);
    }

    // --- ğŸ¬ è§†é¢‘æ§åˆ¶é€»è¾‘ ---
    const videoModal = document.getElementById('video-modal');
    const guardianVideo = document.getElementById('guardian-video');

    window.openVideoModal = function() {
  videoModal.classList.add('show');
  document.body.classList.add('video-active'); // æ¢å¤é»˜è®¤é¼ æ ‡
  // ... å…¶ä»–é€»è¾‘
}

     window.closeVideoModal = function() {
  videoModal.classList.remove('show');
  document.body.classList.remove('video-active'); // é‡æ–°éšè—é»˜è®¤é¼ æ ‡ï¼Œå›åˆ°è‡ªå®šä¹‰çŠ¶æ€
  guardianVideo.pause(); 
  // ... å…¶ä»–é€»è¾‘
}
   
    videoModal.addEventListener('click', (e) => {
      if(e.target === videoModal) closeVideoModal();
    });

    function showDialogueNode(nodeKey, isFastMode = false) {
      // ğŸ”¥ æ‹¦æˆªæ’­æ”¾æŒ‡ä»¤
      if (nodeKey === 'play_video') {
         const loadingText = currentLang === 'en' ? "Accessing Video Feed..." : "æ­£åœ¨æ¥å…¥è§†é¢‘ä¿¡å·...";
         botSay(loadingText, 1000);
         setTimeout(() => {
             openVideoModal();
         }, 1000);
         return; 
      }

      if(nodeKey === 'close') { 
           closeDialogue(); 
           botContainer.classList.add('interaction-done');
           const byeText = currentLang === 'en' ? "Nice chatting with you!" : "å¾ˆé«˜å…´ä¸ä½ äº¤è°ˆï¼";
           botSay(byeText, 3000); 
           return; 
      }    
      
      const node = dialogData[nodeKey];
      if(!node) return;
      rpgOptions.innerHTML = ''; 
      if(typeTimer) clearInterval(typeTimer);
 
      const showButtons = () => {
           node.options.forEach((opt, idx) => {
             const btn = document.createElement('div');
             btn.className = 'rpg-btn'; 
             btn.textContent = '> ' + opt.text;
             
             const isBackAction = opt.text.includes("Back") || opt.text.includes("è¿”å›");
 
             if(isFastMode) {
                 btn.style.opacity = 1;
                 btn.style.transform = 'translateX(0)';
                 btn.style.animation = 'none'; 
             } else {
                 btn.style.animationDelay = `${idx * 0.05}s`;
             }
 
             btn.onclick = (e) => { 
                 e.stopPropagation(); 
                 showDialogueNode(opt.next, isBackAction); 
             };
             rpgOptions.appendChild(btn);
           });
      };
 
      if (isFastMode) {
           rpgText.textContent = node.text; 
           showButtons();
      } else {
           rpgText.textContent = '';
           let i = 0;
           // è¿™é‡Œçš„ 35 åˆ° 45 ä¹‹é—´é€šå¸¸æ˜¯æ‰“å­—æœºæ•ˆæœæœ€èˆ’æœçš„é€Ÿåº¦
           typeTimer = setInterval(() => {
             rpgText.textContent += node.text.charAt(i); 
             i++;
             if(i >= node.text.length) {
               clearInterval(typeTimer);
               // ç¨å¾®å»¶è¿Ÿ 200 æ¯«ç§’å†å‡ºæŒ‰é’®ï¼Œé€»è¾‘æ›´è‡ªç„¶
               setTimeout(showButtons, 200);
             }
           }, 40); // 
      }
 
    function openDialogue() {
      if(rpgDialogue.classList.contains('active')) return;
      rpgDialogue.classList.add('active');
      botContainer.classList.add('speaking');
      botContainer.classList.add('hint-removed'); 
      showDialogueNode('start');
    }
 
    function closeDialogue() {
      rpgDialogue.classList.remove('active');
      botContainer.classList.remove('speaking');
      setTimeout(() => { rpgText.textContent = ''; rpgOptions.innerHTML = ''; }, 300);
    }
 
    if(botContainer) {
      botContainer.addEventListener('click', (e) => {
        e.stopPropagation();
        if (idleInterval) {
            clearInterval(idleInterval);
            idleInterval = null;
        }
        if(botContainer.speechTimer) clearTimeout(botContainer.speechTimer); 
        botSpeech.textContent = "";                     
        botContainer.classList.remove('speaking'); 
        if(rpgDialogue.classList.contains('active')) closeDialogue();
        else openDialogue();
      });
    }
 
    setTimeout(() => {
         const guideText = currentLang === 'en' ? "Click me for guide!" : "ç‚¹å‡»æˆ‘ç­”ç–‘è§£æƒ‘";
         botSay(guideText, 60000); 
    }, 1000);
 
    const badges = document.querySelectorAll('.nav-badges a');
    badges.forEach(b => {
      b.addEventListener('mouseenter', () => {
        document.body.classList.add('badge-hovering', 'hovering');
        if(vantaEffect) vantaEffect.setOptions({ color: 0x60a5fa });
        const accessText = currentLang === 'en' ? "Accessing..." : "æ­£åœ¨è®¿é—®...";
        botSay(accessText, 1500);
      });
      b.addEventListener('mouseleave', () => {
        document.body.classList.remove('badge-hovering', 'hovering');
        if(vantaEffect) vantaEffect.setOptions({ color: 0x3b82f6 });
      });
      b.addEventListener('click', function(e) {
        e.preventDefault();
        const url = this.href;
        badges.forEach((sib, idx) => {
            const img = sib.querySelector('img');
            img.style.animationDelay = `${Math.abs(idx - [...badges].indexOf(this)) * 0.06}s`;
            img.classList.add('rippling');
        });
        setTimeout(() => window.location.href = url, 500);
      });
    });
 // ğŸŸ¢ å…¨å±€å…‰æ ‡æ‚¬åœåé¦ˆ
    document.body.addEventListener('mouseover', (e) => {
      if (e.target.closest('a, button, .ctrl-btn, .rpg-btn, #bot-container, .slider')) {
        document.body.classList.add('hovering');
      }
    });
    
    document.body.addEventListener('mouseout', (e) => {
      if (e.target.closest('a, button, .ctrl-btn, .rpg-btn, #bot-container, .slider')) {
        document.body.classList.remove('hovering');
      }
    });
  });
</script>

 
</body>
</html>
